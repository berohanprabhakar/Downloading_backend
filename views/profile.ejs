<% include ./Partials/header.ejs %>
<div class="container">
  <div class="profile-card">
    <form id="uploadform" hidden action="/uploaddp" method="post" enctype="multipart/form-data">
      <input type="file" name="userdp" accept="image/*">
    </form>

    
    <div id="uploaddp" class="image">
      <img src="/dpuploads/<%= user.dp %>" />
    </div>

    <div class="text-data">
      <span class="name"> <%= user.name %> </span>
      <span class="username"> @<%= user.username %> </span>
      <span class="job">News Editor & Developer & Blogger</span>
    </div>

    <div class="buttons">
      <a href="/uploadapp" class="button">Publish App</a>
      <a href="/logout" class="button">Logout</a>
      <a href="/feed" class="button">Feeds</a>
    </div>
  </div>

  <div class="card-container">
    <div class="in-card">
    <% user.posts.forEach(function(post){ %>
      <div class="card">
        <img src="/APK_all/apkdp/<%= post.appDp %>" alt="Image">
        <h1 <%= post.appTitle %> </h1>
      </div>
    <% }) %>
    </div>
  </div>
</div>

<script>
  document.querySelector("#uploaddp").addEventListener("click", function() {
    document.querySelector("#uploadform input").click();
  })

  document.querySelector("#uploadform input").addEventListener("change", function() {
    document.querySelector("#uploadform").submit();
  })
</script>

<% include ./Partials/footer.ejs %>
